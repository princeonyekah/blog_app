{% set title = 'All Blog Post' %}
{% include "head.html" %}
{% include "sidebar.html" %}
<!-- Bootstrap CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">

<!-- Blog Post Cards -->
<div class="blog-container">
  <div class="row">
    {% for post in posts %}
    <div class="col-md-4" style="padding-left: 20px; padding-right: 20px;">
      <div class="card mb-3" style="box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
        <img class="card-img-top" src="/static/uploads/{{post.imageFilename }}" alt="Card image cap" style="width: 100%; height: 200px; object-fit: contain;">
        <div class="card-body">
          <h5 class="card-title">{{ post.title }}</h5>
          <p class="card-text">{{ post.content[:30] }}{% if post.content|length > 30 %}...{% endif %}</p>
          <a href="/blog/{{post.id}}" class="btn btn-outline-primary rounded-0 float-end">Read more</a>
          <a href="/edit/{{ post.id }}" class="btn btn-outline-primary mb-3">Edit</a>
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-outline-danger mb-3" data-bs-toggle="modal" data-bs-target="#deleteModal{{post.id}}">
            Delete
          </button>
        </div>
      </div>
    </div>
<!-- Modal -->
    <div class="modal fade" id="deleteModal{{post.id}}" tabindex="-1" aria-labelledby="deleteModalLabel{{post.id}}" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="deleteModalLabel{{post.id}}">Confirm Delete</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            Are you sure you want to delete this post?
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <a href="/delete/{{ post.id }}" class="btn btn-danger">Delete</a>
            </div>
        </div>
        </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Bootstrap JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
